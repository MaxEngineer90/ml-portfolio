<button
  (click)="toggleLanguage()"
  [disabled]="isLoading"
  class="group relative bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-lg px-3 py-2 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
  [title]="translateFunction('language.switch')"
>
  <div class="flex items-center space-x-2">
    <! -- Language indicator dot -->
    <div
      class="w-2 h-2 rounded-full transition-all duration-500 ease-out bg-orange-400"
    ></div>

    <! -- Language text with smooth transition -->
    @if (!isLoading) {
      <div class="relative overflow-hidden w-16">
        <span
          class="block text-sm font-medium text-white/90 transition-all duration-300 ease-out"
          [class.transform]="true"
          [class.translate-x-0]="currentLanguage === 'de'"
          [class.-translate-x-full]="currentLanguage === 'en'"
          [class.opacity-100]="currentLanguage === 'de'"
          [class.opacity-0]="currentLanguage === 'en'"
        >
          Deutsch
        </span>
        <span
          class="absolute top-0 left-0 text-sm font-medium text-white/90 transition-all duration-300 ease-out"
          [class.transform]="true"
          [class.translate-x-0]="currentLanguage === 'en'"
          [class.translate-x-full]="currentLanguage === 'de'"
          [class.opacity-100]="currentLanguage === 'en'"
          [class.opacity-0]="currentLanguage === 'de'"
        >
          English
        </span>
      </div>
    } @else {
      <div class="flex items-center space-x-2">
        <div class="w-1 h-1 bg-white/60 rounded-full animate-pulse"></div>
        <div
          class="w-1 h-1 bg-white/60 rounded-full animate-pulse"
          style="animation-delay: 0.2s"
        ></div>
        <div
          class="w-1 h-1 bg-white/60 rounded-full animate-pulse"
          style="animation-delay: 0.4s"
        ></div>
      </div>
    }

    <! -- Subtle arrow -->
    <svg
      class="w-3 h-3 text-white/40 group-hover:text-white/60 transition-all duration-300 group-hover:rotate-180"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M8 7h12m0 0l-4-4m4 4l-4 4"
      ></path>
    </svg>
  </div>
</button>
